{% extends 'base.html' %}
{% block content %}
<h1>Bolet√≠n de {{ student.get_full_name|default:student.username }}</h1>
<p>Generado: {{ generated_at }}</p>

<h3>Promedios por materia</h3>
<table class="table table-bordered">
  <thead>
    <tr><th>Materia</th><th>Promedio</th><th>#Calificaciones</th></tr>
  </thead>
  <tbody>
  {% for row in avg_by_subject %}
    <tr>
      <td>{{ row.subject__name }}</td>
      <td>{{ row.avg|floatformat:2 }}</td>
      <td>{{ row.count }}</td>
    </tr>
  {% empty %}
    <tr><td colspan="3">Sin calificaciones</td></tr>
  {% endfor %}
  </tbody>
</table>

<h3>Asistencia</h3>
<table class="table table-bordered">
  <thead>
    <tr><th>Curso</th><th>Estado</th><th>Cantidad</th></tr>
  </thead>
  <tbody>
  {% for row in attendance_summary %}
    <tr>
      <td>{{ row.course__name }}</td>
      <td>{{ row.status }}</td>
      <td>{{ row.count }}</td>
    </tr>
  {% empty %}
    <tr><td colspan="3">Sin asistencia registrada</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
